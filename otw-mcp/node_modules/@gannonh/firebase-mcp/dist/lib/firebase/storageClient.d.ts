/**
 * Firebase Storage Client
 *
 * This module provides functions for interacting with Firebase Storage.
 * It includes operations for listing files in directories and retrieving file metadata.
 * All functions handle bucket name resolution and return data in a format compatible
 * with the MCP protocol response structure.
 *
 * @module firebase-mcp/storage
 */
/**
 * Detects content type from file path or data URL
 *
 * @param {string} input - The file path or data URL
 * @returns {string} The detected content type
 */
export declare function detectContentType(input: string): string;
/**
 * Sanitizes a file path for better URL compatibility
 *
 * @param {string} filePath - The original file path
 * @returns {string} The sanitized file path
 */
export declare function sanitizeFilePath(filePath: string | undefined | null): string;
/**
 * Generate a permanent public URL for a file in Firebase Storage
 *
 * @param {string} bucketName - The name of the storage bucket
 * @param {string} filePath - The path to the file in storage
 * @returns {string} A permanent public URL for the file
 */
export declare function getPublicUrl(bucketName: string, filePath: string): string;
/**
 * Interface for Firebase Storage File objects
 */
interface StorageFile {
    name: string;
    metadata: Record<string, unknown>;
    exists(): Promise<[boolean]>;
    getMetadata(): Promise<[Record<string, unknown>]>;
    getSignedUrl(options: {
        action: string;
        expires: number;
    }): Promise<[string]>;
    save(buffer: Buffer, options?: unknown): Promise<void>;
}
/**
 * Interface for Firebase Storage Bucket objects
 * This is a simplified version of the actual Firebase Bucket type
 * that includes only the properties and methods we use
 */
interface StorageBucket {
    name: string;
    file(path: string): StorageFile;
    getFiles(options?: {
        prefix?: string;
        delimiter?: string;
        maxResults?: number;
        pageToken?: string;
    }): Promise<[StorageFile[], string | null]>;
}
/**
 * Standard response type for all Storage operations.
 * This interface defines the structure of responses returned by storage functions,
 * conforming to the MCP protocol requirements.
 *
 * @interface StorageResponse
 * @property {Array<{type: string, text: string}>} content - Array of content items to return to the client
 * @property {boolean} [isError] - Optional flag indicating if the response represents an error
 */
interface StorageResponse {
    content: Array<{
        type: string;
        text: string;
    }>;
    isError?: boolean;
}
/**
 * Gets the correct bucket name for Firebase Storage operations.
 * This function tries multiple approaches to determine the bucket name:
 * 1. Uses the FIREBASE_STORAGE_BUCKET environment variable if available
 * 2. Falls back to standard bucket name formats based on the project ID
 *
 * @param {string} projectId - The Firebase project ID
 * @returns {string} The resolved bucket name to use for storage operations
 *
 * @example
 * // Get bucket name for a project
 * const bucketName = getBucketName('my-firebase-project');
 */
export declare function getBucketName(projectId: string): string;
export declare function getBucket(): Promise<StorageBucket | null>;
/**
 * Lists files and directories in a specified path in Firebase Storage.
 * Results are paginated and include download URLs for files and console URLs for directories.
 *
 * @param {string} [directoryPath] - The path to list files from (e.g., 'images/' or 'documents/2023/')
 *                          If not provided, lists files from the root directory
 * @param {number} [pageSize=10] - Number of items to return per page
 * @param {string} [pageToken] - Token for pagination to get the next page of results
 * @returns {Promise<StorageResponse>} MCP-formatted response with file and directory information
 * @throws {Error} If Firebase is not initialized or if there's a Storage error
 *
 * @example
 * // List files in the root directory
 * const rootFiles = await listDirectoryFiles();
 *
 * @example
 * // List files in a specific directory with pagination
 * const imageFiles = await listDirectoryFiles('images', 20);
 * // Get next page using the nextPageToken from the previous response
 * const nextPage = await listDirectoryFiles('images', 20, response.nextPageToken);
 */
export declare function listDirectoryFiles(directoryPath?: string, pageSize?: number, pageToken?: string): Promise<StorageResponse>;
/**
 * Retrieves detailed information about a specific file in Firebase Storage.
 * Returns file metadata and a signed download URL with 1-hour expiration.
 *
 * @param {string} filePath - The complete path to the file in storage (e.g., 'images/logo.png')
 * @returns {Promise<StorageResponse>} MCP-formatted response with file metadata and download URL
 * @throws {Error} If Firebase is not initialized, if the file doesn't exist, or if there's a Storage error
 *
 * @example
 * // Get information about a specific file
 * const fileInfo = await getFileInfo('documents/report.pdf');
 */
export declare function getFileInfo(filePath: string): Promise<StorageResponse>;
/**
 * Uploads a file to Firebase Storage from content (text, base64, etc.)
 *
 * @param {string} filePath - The destination path in Firebase Storage
 * @param {string} content - The file content (text or base64 encoded data) or a local file path
 * @param {string} [contentType] - Optional MIME type. If not provided, it will be inferred
 * @param {object} [metadata] - Optional additional metadata
 * @returns {Promise<StorageResponse>} MCP-formatted response with file info
 * @throws {Error} If Firebase is not initialized or if there's a Storage error
 *
 * @example
 * // Upload a text file
 * const result = await uploadFile('logs/info.txt', 'Log content here', 'text/plain');
 *
 * @example
 * // Upload from base64
 * const result = await uploadFile('images/logo.png', 'data:image/png;base64,iVBORw0...');
 *
 * @example
 * // Upload from a local file path
 * const result = await uploadFile('images/logo.png', '/path/to/local/image.png');
 */
export declare function uploadFile(filePath: string, content: string, contentType?: string, metadata?: Record<string, unknown>): Promise<StorageResponse>;
/**
 * Uploads a file to Firebase Storage from an external URL
 *
 * @param {string} filePath - The destination path in Firebase Storage
 * @param {string} url - The source URL to download from
 * @param {string} [contentType] - Optional MIME type. If not provided, it will be inferred from response headers
 * @param {object} [metadata] - Optional additional metadata
 * @returns {Promise<StorageResponse>} MCP-formatted response with file info
 * @throws {Error} If Firebase is not initialized, if the URL is invalid, or if there's a Storage error
 *
 * @example
 * // Upload a file from URL
 * const result = await uploadFileFromUrl('documents/report.pdf', 'https://example.com/report.pdf');
 */
export declare function uploadFileFromUrl(filePath: string, url: string, contentType?: string, metadata?: Record<string, unknown>): Promise<StorageResponse>;
export {};
